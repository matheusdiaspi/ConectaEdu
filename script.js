// script.js

// =================================================================
// 0. CONTE√öDO DE TEXTO DOS PDFs PARA PESQUISA INTERNA (FULL-TEXT)
// =================================================================

const pdfContent_ConectaEdu = `
1. Arquitetura de Computadores: Explorando os Processadores AMD e Intel
A arquitetura de computadores √© uma √°rea fascinante que nos permite compreender o funcionamento interno dos dispositivos que utilizamos diariamente. Nesse contexto, os processadores desempenham um papel crucial, sendo respons√°veis por executar as instru√ß√µes que tornam poss√≠vel a realiza√ß√£o das mais diversas tarefas em nossos computadores. No mercado, dois gigantes se destacam: AMD e Intel. Vamos explorar as nuances dessas arquiteturas, entender suas diferen√ßas e semelhan√ßas, e mergulhar no universo que molda o desempenho dos dispositivos que utilizamos. 
Continuando nossa jornada pela arquitetura de computadores e a rivalidade entre AMD e Intel, √© fundamental compreender a estrutura interna desses processadores. A AMD, com sua arquitetura Ryzen, adota o conceito de m√∫ltiplos n√∫cleos agrupados em CCX (Complexo de Computa√ß√£o e Comunica√ß√£o), formando uma esp√©cie de "ecossistema de n√∫cleos". Isso permite uma distribui√ß√£o eficiente de tarefas, beneficiando principalmente as atividades que se beneficiam da execu√ß√£o simult√¢nea de processos. Em contrapartida, a Intel utiliza a arquitetura Core, conhecida por sua √™nfase em alcan√ßar altas frequ√™ncias de clock. Cada n√∫cleo, nesse caso, √© otimizado para desempenhar tarefas complexas de forma r√°pida e eficaz. 
A AMD tamb√©m se destaca pela utiliza√ß√£o da tecnologia de fabrica√ß√£o FinFET, que contribui para a efici√™ncia energ√©tica e o desempenho geral. Essa abordagem possibilita a produ√ß√£o de processadores mais poderosos sem aumentar significativamente o consumo de energia. Por outro lado, a Intel, embora tenha enfrentado desafios recentes em rela√ß√£o √† redu√ß√£o do tamanho dos transistores, historicamente tem sido pioneira nesse aspecto, impactando diretamente na capacidade de integra√ß√£o de mais transistores em um espa√ßo menor. 
Al√©m disso, a gest√£o da mem√≥ria cache √© um elemento crucial na arquitetura de ambos os fabricantes. A AMD, ao adotar um modelo de cache L3 compartilhado entre os n√∫cleos, promove uma maior coopera√ß√£o entre eles, facilitando o acesso a dados compartilhados. A Intel, por sua vez, muitas vezes utiliza uma abordagem de cache mais hier√°rquica, com diferentes n√≠veis de cache para otimizar o acesso a dados frequentemente utilizados. 
Essas nuances t√©cnicas, embora possam parecer complexas √† primeira vista, t√™m um impacto direto na experi√™ncia do usu√°rio. A escolha entre AMD e Intel n√£o se resume apenas a n√∫meros e especifica√ß√µes, mas √† maneira como essas tecnologias se traduzem na velocidade de resposta, na capacidade de multitarefa e na efici√™ncia energ√©tica de nossos dispositivos. 
Arquitetura AMD: Inova√ß√£o e Competitividade 
A AMD (Advanced Micro Devices) tem conquistado seu espa√ßo no mercado de processadores com uma abordagem inovadora e competitiva. A empresa tem se destacado especialmente nas √∫ltimas d√©cadas, desafiando a hegemonia da Intel. A arquitetura dos processadores AMD √© conhecida por sua efici√™ncia em multitarefa, proporcionando um excelente desempenho em situa√ß√µes que exigem o processamento simult√¢neo de v√°rias tarefas. 
Os processadores AMD adotam a arquitetura Ryzen, que √© modular e escal√°vel, permitindo uma ampla gama de op√ß√µes para atender √†s necessidades espec√≠ficas dos usu√°rios. Isso significa que, ao escolher um processador AMD, os consumidores t√™m a flexibilidade de optar por modelos que atendam √†s demandas desde tarefas simples do dia a dia at√© aplica√ß√µes mais exigentes, como edi√ß√£o de v√≠deo e jogos pesados. 
Dentro do universo de processadores, a AMD tem se destacado como uma for√ßa impulsionadora da inova√ß√£o e da competitividade. A arquitetura AMD Ryzen, em particular, representa um marco significativo na abordagem da empresa para atender √†s demandas diversificadas dos usu√°rios. Essa arquitetura √© conhecida por seu design modular, permitindo uma flexibilidade √∫nica na cria√ß√£o de processadores adapt√°veis a diversas necessidades.  
A modularidade da arquitetura Ryzen se traduz em uma vasta gama de op√ß√µes para os consumidores. Ao oferecer diferentes configura√ß√µes de n√∫cleos e threads, a AMD possibilita que os usu√°rios escolham processadores que atendam especificamente √†s exig√™ncias de suas atividades di√°rias. Desde tarefas b√°sicas, como navega√ß√£o na web, at√© atividades mais intensivas, como edi√ß√£o de v√≠deos e jogos, a AMD fornece op√ß√µes que equilibram desempenho e custo. 
Outro ponto de destaque na arquitetura AMD √© a √™nfase na capacidade de multitarefa. Com a inclus√£o de um n√∫mero significativo de n√∫cleos, os processadores Ryzen se destacam em situa√ß√µes em que diversas tarefas precisam ser executadas simultaneamente. Isso √© particularmente ben√©fico para profissionais que lidam com projetos complexos, como designers, editores de v√≠deo e desenvolvedores, que podem experimentar ganhos substanciais de efici√™ncia ao realizar v√°rias tarefas ao mesmo tempo. 
A AMD, ao alinhar inova√ß√£o e competitividade, tem contribu√≠do para um cen√°rio de mercado mais din√¢mico e diversificado. A constante evolu√ß√£o da arquitetura Ryzen n√£o apenas desafia as normas estabelecidas, mas tamb√©m oferece aos consumidores mais op√ß√µes e maior poder de escolha ao decidirem qual processador melhor atende √†s suas necessidades espec√≠ficas. 
a. Arquitetura Intel: Tradi√ß√£o e Inova√ß√£o 
A Intel, por sua vez, √© uma empresa com uma longa tradi√ß√£o na fabrica√ß√£o de processadores. Sua arquitetura, baseada na microarquitetura x86, tem sido a espinha dorsal de computadores pessoais por d√©cadas. A empresa busca constantemente inova√ß√µes para manter sua posi√ß√£o de destaque no mercado. Os processadores Intel, como os da linha Core, s√£o conhecidos por sua excelente performance em tarefas que demandam alta frequ√™ncia de clock. Isso faz com que se destaquem em atividades que exigem grande poder de processamento por n√∫cleo, como jogos e softwares de edi√ß√£o. A Intel tamb√©m tem investido em recursos espec√≠ficos, como a tecnologia Hyper-Threading, que simula n√∫cleos virtuais para melhorar a efici√™ncia em multitarefa. 
A Intel, com sua longa tradi√ß√£o na fabrica√ß√£o de processadores, combina a estabilidade proveniente de d√©cadas de experi√™ncia com uma busca constante por inova√ß√£o. A arquitetura Intel Core √© um testemunho dessa combina√ß√£o, incorporando elementos tradicionais e inovadores para atender √†s exig√™ncias modernas dos usu√°rios. A base dessa arquitetura √© a microarquitetura x86, que se tornou uma refer√™ncia na ind√∫stria de computadores pessoais, proporcionando compatibilidade e familiaridade aos usu√°rios.  
A inova√ß√£o na arquitetura Intel se manifesta em v√°rias frentes, sendo uma das mais not√°veis a √™nfase na obten√ß√£o de altas frequ√™ncias de clock. Essa abordagem visa proporcionar um desempenho excepcional em tarefas que demandam uma resposta r√°pida de um √∫nico n√∫cleo. Em atividades como jogos e determinadas aplica√ß√µes profissionais, onde o paralelismo n√£o √© crucial, essa caracter√≠stica torna os processadores Intel particularmente eficazes. 
A tecnologia Hyper-Threading √© outro aspecto inovador da arquitetura Intel, oferecendo a simula√ß√£o de n√∫cleos virtuais para melhorar a efici√™ncia em multitarefa. Isso significa que um processador Intel com Hyper-Threading pode lidar com mais threads simultaneamente, resultando em uma execu√ß√£o mais suave de v√°rias tarefas. Essa capacidade √© especialmente valiosa em situa√ß√µes onde a multitarefa √© comum, como em ambientes de trabalho que envolvem a utiliza√ß√£o simult√¢nea de aplicativos diversos. 
Al√©m disso, a Intel tem sido pioneira na redu√ß√£o do tamanho dos transistores, uma caracter√≠stica crucial para aumentar a densidade de transistores em um chip. Embora o ritmo de diminui√ß√£o desses transistores tenha enfrentado desafios recentemente, a tradi√ß√£o da Intel em explorar novas tecnologias de fabrica√ß√£o tem sido um fator impulsionador na evolu√ß√£o constante de seus processadores. 
Em resumo, a arquitetura Intel √© um casamento entre a tradi√ß√£o que solidificou sua posi√ß√£o no mercado e a inova√ß√£o constante para atender √†s demandas din√¢micas dos usu√°rios modernos. Ao equilibrar elementos consolidados com novas tecnologias, a Intel continua a ser uma for√ßa influente no desenvolvimento de processadores que se destacam em diversos cen√°rios de uso. 
Qual a principal diferen√ßa t√©cnica entra as duas marcas? 
b. Diferen√ßas T√©cnicas e Impactos no Desempenho 
Ao comparar os processadores AMD e Intel, √© essencial entender as diferen√ßas t√©cnicas que influenciam diretamente no desempenho dos dispositivos. A arquitetura dos n√∫cleos, a quantidade de cache, a tecnologia de fabrica√ß√£o e a frequ√™ncia de clock s√£o fatores cr√≠ticos a serem considerados. Os processadores AMD Ryzen, por exemplo, frequentemente apresentam um maior n√∫mero de n√∫cleos f√≠sicos e l√≥gicos em compara√ß√£o com modelos equivalentes da Intel. Isso pode resultar em um desempenho superior em tarefas que se beneficiam do paralelismo, como renderiza√ß√£o de v√≠deos e execu√ß√£o de m√°quinas virtuais. 
J√° a Intel, ao focar em frequ√™ncias de clock mais altas, tende a se destacar em atividades que demandam um alto desempenho por n√∫cleo, como jogos que ainda n√£o tiram total proveito de m√∫ltiplos n√∫cleos. 
`;

// =================================================================
// 1. FUN√á√ïES DE SUPORTE (Busca Robusta)
// =================================================================

// Fun√ß√£o Auxiliar para buscar frases dentro do conte√∫do
const searchPdfContent = (content, term) => {
    // 1. Limpa e normaliza o termo de busca
    const lowerCaseTerm = term.toLowerCase()
        .replace(/[\u00A0\uFEFF]/g, ' ') 
        .replace(/\s+/g, ' ') 
        .trim();
    
    const results = [];
    const normalizedContent = content
        .replace(/[\u00A0\uFEFF]/g, ' ') 
        .replace(/\s+/g, ' ') 
        .trim();

    // 2. Divide o conte√∫do em blocos para exibi√ß√£o, usando pontua√ß√µes fortes como delimitadores
    const blocks = normalizedContent.split(/(?<=[.?!;])\s*/g).filter(s => s.trim().length > 0);
    const uniqueResults = new Set();

    blocks.forEach(block => {
        if (block.toLowerCase().includes(lowerCaseTerm)) {
            let cleanBlock = block.trim();
            
            if (!uniqueResults.has(cleanBlock)) {
                if (!cleanBlock.match(/[.?!;]$/)) {
                    cleanBlock += '.';
                }
                uniqueResults.add(cleanBlock);
                results.push(cleanBlock);
            }
        }
    });

    return results;
};


// 2. Funcionalidade do Bot√£o CTA (Chamada para A√ß√£o)
document.getElementById('cta-button').addEventListener('click', function() {
    alert('√ìtima escolha! Vamos te conectar com o aprendizado. A partir de R$ 50,00, voc√™ j√° come√ßa a estudar!');
    document.getElementById('planos').scrollIntoView({ behavior: 'smooth' });
});


// 3. Efeito de Fundo do Header ao Rolar (Scroll)
window.addEventListener('scroll', function() {
    const header = document.querySelector('header');
    if (window.scrollY > 50) {
        header.style.backgroundColor = '#1C6D42';
    } else {
        header.style.backgroundColor = 'var(--primary-color)';
    }
});


// =================================================================
// 4. Fun√ß√£o para Abrir o PDF em uma NOVA ABA (COM P√ÅGINA E DESTAQUE)
// =================================================================
function openPdf(fileName, page, searchTerm) {
    let url = fileName;
    
    if (page && page > 1) {
        url += `#page=${page}`;
    }
    
    if (searchTerm && searchTerm.trim() !== '') {
        const encodedSearchTerm = encodeURIComponent(searchTerm.trim());
        url += `#search="${encodedSearchTerm}"`;
    }
    
    window.open(url, '_blank');
    console.log(`Abrindo o arquivo: ${fileName} na p√°gina: ${page}, buscando por: ${searchTerm}.`);
}

// =================================================================
// 5. L√ìGICA DE DEBOUNCE E BUSCA EM TEMPO REAL
// =================================================================

/**
 * Cria uma fun√ß√£o debounced que atrasa a execu√ß√£o de 'func' at√© que 'delay' milissegundos
 * tenham decorrido desde a √∫ltima vez que a fun√ß√£o debounced foi chamada.
 */
function debounce(func, delay) {
    let timeoutId;
    return function(...args) {
        clearTimeout(timeoutId);
        timeoutId = setTimeout(() => {
            func.apply(this, args);
        }, delay);
    };
}

// O buscador real (mantido inalterado)
function searchMaterial() {
    const searchTerm = document.getElementById('pdf-search').value;
    const lowerCaseSearchTerm = searchTerm.toLowerCase(); 

    const serviceCards = document.querySelectorAll('.service-card');
    const pdfResultsContainer = document.getElementById('pdf-results');
    
    let foundInServices = false;
    let htmlPdfResults = '';
    
    if (searchTerm.length === 0) {
        // Se a busca estiver vazia, mostra todos os cards
        serviceCards.forEach(card => card.style.display = 'block');
        serviceCards.forEach(card => card.style.border = '5px solid var(--primary-color)');
        pdfResultsContainer.innerHTML = '';
        return; 
    }

    // --- 5.1. Lista de Documentos Searchables (Com URL e P√ÅGINAS) ---
    const documents = [
        
        { 
          title: 'Arquitetura de Computadores: Explorando os Processadores AMD e Intel', 
          keywords: 'arquitetura de computadores, amd, intel, processadores, desenvolvimento de sistema, introdu√ß√£o', 
          url: 'ConectaEdu.pdf', 
          content: pdfContent_ConectaEdu,
          page_start: 3 
        },
        
        { 
          title: 'Arquitetura Intel: Tradi√ß√£o e Inova√ß√£o', 
          keywords: 'arquitetura intel, intel core, hyper-threading, microarquitetura x86', 
          url: 'ConectaEdu.pdf', 
          content: pdfContent_ConectaEdu,
          page_start: 5 
        },

        { 
          title: 'Diferen√ßas T√©cnicas e Impactos no Desempenho', 
          keywords: 'diferen√ßas t√©cnicas, desempenho, cache, frequ√™ncia clock, ryzen, intel', 
          url: 'ConectaEdu.pdf', 
          content: pdfContent_ConectaEdu,
          page_start: 7 
        },
        
        { 
          title: 'Guia R√°pido de Canva e Design', 
          keywords: 'canva, design, habilidades digitais', 
          content: 'Guia de introdu√ß√£o ao Canva e t√©cnicas b√°sicas de design digital. Aprenda a criar apresenta√ß√µes e posts para redes sociais.'
        },
    ];
    
    
    // --- 5.2. Filtragem dos cards de servi√ßo (Cursos) ---
    serviceCards.forEach(card => {
        const cardTitle = card.querySelector('h4').textContent.toLowerCase();
        const cardDescription = card.querySelector('p').textContent.toLowerCase();
        
        const matches = cardTitle.includes(lowerCaseSearchTerm) || cardDescription.includes(lowerCaseSearchTerm);

        if (matches) {
            card.style.display = 'block'; 
            card.style.border = '5px solid orange'; 
            foundInServices = true;
        } else {
            card.style.display = 'none';
        }
    });

    // --- 5.3. Busca de Frases dentro dos Conte√∫dos ---
    const pdfContentMatches = [];
    
    documents.forEach(doc => {
        if (doc.content) {
            const matches = searchPdfContent(doc.content, searchTerm); 
            if (matches.length > 0) {
                pdfContentMatches.push({ 
                    title: doc.title, 
                    url: doc.url, 
                    phrases: matches, 
                    page_start: doc.page_start 
                }); 
            }
        }
    });


    // --- 5.4. Exibi√ß√£o dos Resultados (COM LINKS DE PDF) ---
    if (pdfContentMatches.length > 0) {
        htmlPdfResults += '<h4>üìÅ Trechos Encontrados em Documentos e Materiais Did√°ticos:</h4>';
        
        pdfContentMatches.forEach(docMatch => {
            
            const pageInfo = docMatch.page_start ? ` (P√°gina ${docMatch.page_start})` : '';
            const openPdfLink = docMatch.url ? 
                ` (<a href="#" onclick="openPdf('${docMatch.url}', ${docMatch.page_start || 1}, '${searchTerm}'); return false;">Abrir PDF completo</a>)` : 
                ''; 

            htmlPdfResults += `<h5 style="margin-top: 20px; color: var(--secondary-color); font-size: 1.1rem;">No documento: ${docMatch.title}${pageInfo}${openPdfLink}</h5>`;
            
            docMatch.phrases.forEach(phrase => {
                let displayedPhrase = phrase;
                
                // Se N√ÉO houver URL de PDF, faz o destaque in-line
                if (!docMatch.url) {
                    const termToHighlight = searchTerm.replace(/[\u00A0\uFEFF]/g, ' ').replace(/\s+/g, ' ').trim();
                    displayedPhrase = phrase.replace(new RegExp(termToHighlight, 'gi'), match => `<strong>${match}</strong>`);
                }
                
                // O clique para abrir o PDF s√≥ √© adicionado se houver uma URL v√°lida
                const onClickAction = docMatch.url ? `onclick="openPdf('${docMatch.url}', ${docMatch.page_start || 1}, '${searchTerm}'); return false;" style="cursor: pointer;"` : '';
                
                htmlPdfResults += `<p class="pdf-item" ${onClickAction} style="background-color: #f0f0f0; border-left: 3px solid #4682B4; margin-bottom: 5px;">... ${displayedPhrase}</p>`;
            });
        });
    }

    
    // --- 5.5. Feedback Final ---
    pdfResultsContainer.innerHTML = htmlPdfResults;
    
    if (!foundInServices && pdfContentMatches.length === 0) {
        pdfResultsContainer.innerHTML = `<h4>Nenhum curso ou material did√°tico encontrado para "${searchTerm}".</h4>`;
        
        serviceCards.forEach(card => card.style.display = 'block');
        serviceCards.forEach(card => card.style.border = '5px solid var(--primary-color)');
    } else if (pdfContentMatches.length > 0 && !foundInServices) {
         serviceCards.forEach(card => card.style.display = 'block');
         serviceCards.forEach(card => card.style.border = '5px solid var(--primary-color)');
    }
}


// --- 6. ATIVA√á√ÉO DA BUSCA EM TEMPO REAL ---

// Cria a fun√ß√£o debounced (atrasada)
const debouncedSearch = debounce(searchMaterial, 300); // 300ms de atraso

// Adiciona o novo evento de escuta √† caixa de busca
document.getElementById('pdf-search').addEventListener('input', debouncedSearch);

// Remove o antigo listener de clique, se ele ainda existir (opcional, mas seguro)
document.getElementById('search-button').addEventListener('click', (e) => {
    e.preventDefault(); // Impede o envio do formul√°rio, se houver
    searchMaterial(); // Executa a busca imediatamente, caso o usu√°rio clique
});